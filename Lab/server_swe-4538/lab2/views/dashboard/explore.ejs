<%- include('../partials/header.ejs') %> <%- include('../partials/navbar.ejs')
%>

<section class="max-w-7xl mx-auto py-4">
  <h2 class="text-2xl mb-6">Explore Animee</h2>

  <!-- Display Tags for Filtering -->
  <div class="mb-6">
    <div class="flex flex-wrap gap-3">
      <% tags.forEach(tag => { %>
      <a
        href="/explore?tagId=<%= tag.tag_id %>"
        class="px-4 py-2 rounded-full text-white <% if (selectedTagId == tag.tag_id) { %> bg-rose-600 <% } else { %> bg-gray-400 hover:bg-gray-600 <% } %>"
      >
        <%= tag.tag_name %>
      </a>
      <% }) %>
    </div>
  </div>

  <!-- Display Anime -->
  <% if (animes.length > 0) { %>
  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
  >
    <% animes.forEach((anime) => { %>
    <div class="bg-white shadow-lg rounded-xl p-4">
      <img
        src="<%= anime.anime_img %>"
        alt="<%= anime.anime_name %>"
        class="w-full h-48 object-cover rounded-t-xl"
      />
      <h3 class="text-xl font-semibold mt-2"><%= anime.anime_name %></h3>
      <p class="text-gray-500 text-sm"><%= anime.description %></p>
      <div class="mt-4">
        <a
          href="/animes/<%= anime.anime_id %>"
          class="text-sm font-semibold text-rose-600 hover:text-rose-700 hover:underline"
          >View &rarr;</a
        >
      </div>
    </div>
    <% }) %>
  </div>
  <% } else { %>
  <p class="text-lg text-gray-500">No anime found</p>
  <% } %>
</section>

<%- include('../partials/footer.ejs') %>
